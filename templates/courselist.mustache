{{!
    @template block_teamdashboard/courselist

    This template renders categorized courses in Statusbars for leaders.

    Example context (json):
    {
        "courses": [
            {
                "name": "Compliance",
                "url": "https://moodle.example.com/course/view.php?id=1",
                "progress": {
                    "completed": 50,
                    "inprogress": 30,
                    "overdue": 20
                },
                "participants": 15
            }
        ],
        "legend_completed": "Abgeschlossen",
        "legend_inprogress": "In Bearbeitung",
        "legend_overdue": "ÃœberfÃ¤llig",
        "hasprev": true,
        "prevurl": "https://moodle.example.com/page=1",
        "hasnext": true,
        "nexturl": "https://moodle.example.com/page=3",
        "nextlabel": "Mehr anzeigen"
    }
}}

<div style="font-family:Arial,sans-serif; font-size:0.95em; max-width:800px;">

    <!-- Legende -->
    <div style="text-align:right; margin-bottom:12px; font-size:0.8em; color:#444; display:flex; flex-wrap:wrap; gap:0.6em; justify-content:flex-end;">
        <span style="display:inline-flex; align-items:center; gap:0.25em;">
            <span style="width:6px; height:14px; background:#4caf50; display:inline-block;"></span> {{legend_completed}}
        </span>
        <span style="display:inline-flex; align-items:center; gap:0.25em;">
            <span style="width:6px; height:14px; background:#ffeb3b; display:inline-block;"></span> {{legend_inprogress}}
        </span>
        <span style="display:inline-flex; align-items:center; gap:0.25em;">
            <span style="width:6px; height:14px; background:#e74c3c; display:inline-block;"></span> {{legend_overdue}}
        </span>
    </div>

    <!-- Course list -->
    {{#courses}}
        <div style="border:1px solid #ddd; border-radius:8px; padding:12px; margin-bottom:2px;">
            <h3 class="teamdashboard-course-title">
                <a href="{{url}}" style="color:inherit; text-decoration:none;">{{name}}</a>
            </h3>

            <div style="background:#eee; height:14px; border-radius:6px; overflow:hidden; margin:6px 0 12px 0;">
                <div style="background:#4caf50; width:{{progress.completed}}%; height:14px; float:left;"></div>
                <div style="background:#ffeb3b; width:{{progress.inprogress}}%; height:14px; float:left;"></div>
                <div style="background:#e74c3c; width:{{progress.overdue}}%; height:14px; float:left;"></div>
            </div>

            <div style="font-size:0.9em; color:#666;">
                ðŸ‘¥ Teilnehmer/innen: {{participants}}
            </div>
        </div>
    {{/courses}}

    <!-- Pagination -->
    <div style="text-align:center; margin-top:0em;">
        {{#hasprev}}
            <a href="{{prevurl}}" style="font-size:1.5em; font-weight:bold; color:#333; text-decoration:none; margin-right:1em;">ðŸ¡„</a>
        {{/hasprev}}

        {{#hasnext}}
            <a href="{{nexturl}}" style="font-size:1.5em; font-weight:bold; color:#333; text-decoration:none;">ðŸ¡†</a>
        {{/hasnext}}
    </div>
</div>
